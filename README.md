# ğŸš€ PDF Study App: ê¸°ìˆ  ë¬¸ì„œ

ì•ˆë…•í•˜ì„¸ìš”! `pdf-study-app` í”„ë¡œì íŠ¸ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤. ì´ ë¬¸ì„œëŠ” ìƒˆë¡œìš´ íŒ€ì›ì´ í”„ë¡œì íŠ¸ì˜ ê¸°ìˆ  ìŠ¤íƒ, ì•„í‚¤í…ì²˜, ê·¸ë¦¬ê³  ê°œë°œ ì›Œí¬í”Œë¡œìš°ë¥¼ ì‹ ì†í•˜ê²Œ íŒŒì•…í•˜ì—¬ **ì…ì‚¬ ì²«ë‚  ì½”ë“œ ê¸°ì—¬ë¥¼ ì‹œì‘í•  ìˆ˜ ìˆë„ë¡ ë•ëŠ” ë‹¨ í•˜ë‚˜ì˜ ì§„ì‹¤ì˜ ì›ì²œ(Single Source of Truth)**ì…ë‹ˆë‹¤.

---

### **ëª©ì°¨**
1.  **ê°œìš” (Overview)**
2.  **ì£¼ìš” í˜ì´ì§€ ë° ê¸°ëŠ¥ (Key Pages & Features)**
3.  **ì‹œì‘í•˜ê¸° (Getting Started)**
4.  **í”„ë¡œì íŠ¸ êµ¬ì¡° (Project Structure)**
5.  **í•µì‹¬ ì•„í‚¤í…ì²˜ ë° ì»¨ì…‰ (Core Architecture & Concepts)**
6.  **ê°œë°œ ê°€ì´ë“œ (Development Guide)**
7.  **í™˜ê²½ ë³€ìˆ˜ (Environment Variables)**
8.  **ë°°í¬ (Deployment)**

---

## 1. ê°œìš” (Overview)

### 1.1. í”„ë¡œì íŠ¸ ì†Œê°œ
`pdf-study-app`ì€ ì‚¬ìš©ìê°€ PDF ë¬¸ì„œë¥¼ ì—…ë¡œë“œí•˜ë©´, Googleì˜ Gemini AI ëª¨ë¸ì„ í™œìš©í•˜ì—¬ í•´ë‹¹ ë¬¸ì„œ ê¸°ë°˜ì˜ ë§ì¶¤í˜• í•™ìŠµ ê°€ì´ë“œì™€ í€´ì¦ˆë¥¼ ìƒì„±í•´ì£¼ëŠ” ì§€ëŠ¥í˜• í•™ìŠµ ë³´ì¡° ì• í”Œë¦¬ì¼€ì´ì…˜ì…ë‹ˆë‹¤. ì‚¬ìš©ìëŠ” ë³µì¡í•œ ìë£Œë¥¼ ì²´ê³„ì ìœ¼ë¡œ í•™ìŠµí•˜ê³ , ì§€ì‹ì„ íš¨ê³¼ì ìœ¼ë¡œ í‰ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì´ í”„ë¡œì íŠ¸ëŠ” **Supabase**ë¥¼ ë°±ì—”ë“œ ì„œë¹„ìŠ¤(BaaS, Backend as a Service)ë¡œ í™œìš©í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤, ì‚¬ìš©ì ì¸ì¦, íŒŒì¼ ìŠ¤í† ë¦¬ì§€ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ë©°, í”„ë¡ íŠ¸ì—”ë“œëŠ” **Next.js**ì™€ **React**ë¥¼ ê¸°ë°˜ìœ¼ë¡œ êµ¬ì¶•ë˜ì—ˆìŠµë‹ˆë‹¤.

### 1.2. ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜
ë³¸ í”„ë¡œì íŠ¸ì˜ ì „ì²´ì ì¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ëŠ” ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤. ì‚¬ìš©ìì˜ ìš”ì²­ë¶€í„° ë°ì´í„°ë² ì´ìŠ¤ì™€ì˜ ìƒí˜¸ì‘ìš©ê¹Œì§€ì˜ íë¦„ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.

```mermaid
graph TD
    subgraph "ìœ ì €"
        A[User]
    end

    subgraph "í”„ë¡ íŠ¸ì—”ë“œ (Vercel)"
        B{Next.js App}
        B -- "Server/Client Components" --> D[React UI]
        B -- "Route Handlers" --> E{API Routes}
    end

    subgraph "ë°±ì—”ë“œ ì„œë¹„ìŠ¤ (Supabase)"
        F[Supabase Auth]
        G[Supabase DB (PostgreSQL)]
        H[Supabase Storage]
    end

    subgraph "ì™¸ë¶€ AI ì„œë¹„ìŠ¤"
        I[Google Gemini API]
    end

    A --> B;
    B -- "ì¸ì¦ ìš”ì²­" --> F;
    D -- "PDF ì—…ë¡œë“œ/í•™ìŠµ ìš”ì²­" --> E;
    E -- "DB ì¿¼ë¦¬" --> G;
    E -- "íŒŒì¼ ì €ì¥/ì¡°íšŒ" --> H;
    E -- "í•™ìŠµìë£Œ ìƒì„± ìš”ì²­" --> I;
```

---

## 2. ì£¼ìš” í˜ì´ì§€ ë° ê¸°ëŠ¥ (Key Pages & Features)

ì´ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ì‚¬ìš©ìì˜ í•™ìŠµ íë¦„ì— ë”°ë¼ ë‹¤ìŒê³¼ ê°™ì€ ì£¼ìš” í˜ì´ì§€ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤. ê° í˜ì´ì§€ëŠ” `app` ë””ë ‰í† ë¦¬ êµ¬ì¡°ì™€ ì§ì ‘ì ìœ¼ë¡œ ë§¤í•‘ë©ë‹ˆë‹¤.

*   **`app/page.tsx` - ë©”ì¸ í˜ì´ì§€ (ê³¼ëª© ëª©ë¡)**
    *   **ì—­í• **: ì‚¬ìš©ìê°€ ìƒì„±í•œ ëª¨ë“  í•™ìŠµ ê³¼ëª©ì˜ ëª©ë¡ì„ ë³´ì—¬ì£¼ëŠ” ëŒ€ì‹œë³´ë“œì…ë‹ˆë‹¤.
    *   **ì£¼ìš” ê¸°ëŠ¥**:
        *   ì „ì²´ ê³¼ëª© ë¦¬ìŠ¤íŠ¸ ì¡°íšŒ
        *   ìƒˆë¡œìš´ í•™ìŠµ ê³¼ëª© ìƒì„±
        *   ê° ê³¼ëª©ì˜ ìƒì„¸ í˜ì´ì§€ë¡œ ì´ë™

*   **`app/subjects/[id]/page.tsx` - ê³¼ëª© ìƒì„¸ ë° ë¬¸ì„œ ê´€ë¦¬**
    *   **ì—­í• **: íŠ¹ì • ê³¼ëª©ì— ëŒ€í•œ í•™ìŠµ ìë£Œ(PDF)ë¥¼ ê´€ë¦¬í•˜ëŠ” í˜ì´ì§€ì…ë‹ˆë‹¤.
    *   **ì£¼ìš” ê¸°ëŠ¥**:
        *   í•™ìŠµí•  PDF ë¬¸ì„œ ì—…ë¡œë“œ
        *   ì—…ë¡œë“œëœ ë¬¸ì„œ ëª©ë¡ í™•ì¸ ë° ìƒíƒœ(ë¶„ì„ ì¤‘, ë¶„ì„ ì™„ë£Œ) ì¶”ì 
        *   ë¬¸ì„œ ì‚­ì œ ë° í•™ìŠµ ê°€ì´ë“œ/í€´ì¦ˆ ìƒì„± ìš”ì²­
        *   í•™ìŠµ í˜ì´ì§€ë¡œ ì´ë™

*   **`app/subjects/[id]/study/page.tsx` - í•™ìŠµ í˜ì´ì§€**
    *   **ì—­í• **: AIê°€ ìƒì„±í•œ í•™ìŠµ ì½˜í…ì¸ ë¥¼ í†µí•´ ë³¸ê²©ì ìœ¼ë¡œ í•™ìŠµì„ ì§„í–‰í•˜ëŠ” ê³µê°„ì…ë‹ˆë‹¤.
    *   **ì£¼ìš” ê¸°ëŠ¥**:
        *   AIê°€ ìƒì„±í•œ êµ¬ì¡°í™”ëœ í•™ìŠµ ê°€ì´ë“œ ì¡°íšŒ
        *   ì—…ë¡œë“œí•œ ì›ë³¸ PDF ë¬¸ì„œ í™•ì¸
        *   ì§€ì‹ í‰ê°€ í˜ì´ì§€ë¡œ ì´ë™

*   **`app/subjects/[id]/study/assessment/page.tsx` - ì§€ì‹ í‰ê°€ í˜ì´ì§€**
    *   **ì—­í• **: ë¬¸ì„œ ë‚´ìš©ì„ ê¸°ë°˜ìœ¼ë¡œ ìƒì„±ëœ AI í€´ì¦ˆë¥¼ í’€ë©° í•™ìŠµ ì„±ì·¨ë„ë¥¼ ìŠ¤ìŠ¤ë¡œ í‰ê°€í•˜ëŠ” í˜ì´ì§€ì…ë‹ˆë‹¤.
    *   **ì£¼ìš” ê¸°ëŠ¥**:
        *   ê°ê´€ì‹ ë˜ëŠ” ë‹¨ë‹µí˜• í€´ì¦ˆ í’€ì´
        *   í€´ì¦ˆ ê²°ê³¼ í™•ì¸ ë° í”¼ë“œë°±

---

## 3. ì‹œì‘í•˜ê¸° (Getting Started)

ë¡œì»¬ ê°œë°œ í™˜ê²½ì„ ì„¤ì •í•˜ê³  í”„ë¡œì íŠ¸ë¥¼ ì‹¤í–‰í•˜ê¸° ìœ„í•œ ë‹¨ê³„ë³„ ê°€ì´ë“œì…ë‹ˆë‹¤.

### 3.1. ì‚¬ì „ ìš”êµ¬ì‚¬í•­
*   **Node.js**: `v20.x` ë˜ëŠ” ê·¸ ì´ìƒ ë²„ì „ì„ ê¶Œì¥í•©ë‹ˆë‹¤.
*   **pnpm**: `npm install -g pnpm` ëª…ë ¹ì–´ë¡œ ì„¤ì¹˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
*   **Supabase Account**: ë°ì´í„°ë² ì´ìŠ¤ì™€ ì¸ì¦ì„ ìœ„í•´ [Supabase](https://supabase.com/) ê³„ì •ì´ í•„ìš”í•©ë‹ˆë‹¤.
*   **Google AI Account**: AI ê¸°ëŠ¥ì„ ìœ„í•´ [Google AI Studio](https://aistudio.google.com/)ì—ì„œ API í‚¤ë¥¼ ë°œê¸‰ë°›ì•„ì•¼ í•©ë‹ˆë‹¤.

### 3.2. ì„¤ì¹˜ ë° ì„¤ì •
1.  **ì €ì¥ì†Œ ë³µì œ (Clone)**
    ```bash
    git clone [ì—¬ê¸°ì— ì†ŒìŠ¤ ì½”ë“œ ì €ì¥ì†Œ URLì„ ì…ë ¥í•˜ì„¸ìš”]
    cd pdf-study-app
    ```

2.  **ì¢…ì†ì„± ì„¤ì¹˜ (Install Dependencies)**
    ```bash
    pnpm install
    ```

3.  **í™˜ê²½ ë³€ìˆ˜ ì„¤ì • (Environment Variables)**
    ```bash
    node scripts/setup-env.js
    ```
    í„°ë¯¸ë„ì˜ ì•ˆë‚´ì— ë”°ë¼ `Supabase URL`, `Supabase Anon Key`, `Gemini API Key`ë¥¼ ì…ë ¥í•˜ì„¸ìš”.

4.  **ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì • (Database Setup)**
    > **[TODO]**
    > `supabase/schema.sql` ë˜ëŠ” ìœ ì‚¬í•œ ìŠ¤í‚¤ë§ˆ íŒŒì¼ì˜ ë‚´ìš©ì„ Supabase ëŒ€ì‹œë³´ë“œì˜ `SQL Editor`ì— ë¶™ì—¬ë„£ê³  ì‹¤í–‰í•˜ë„ë¡ ì•ˆë‚´í•´ì•¼ í•©ë‹ˆë‹¤.

5.  **ê°œë°œ ì„œë²„ ì‹¤í–‰ (Run Development Server)**
    ```bash
    pnpm dev
    ```
    `http://localhost:3000`ìœ¼ë¡œ ì ‘ì†í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ í™•ì¸í•©ë‹ˆë‹¤.

---

## 4. í”„ë¡œì íŠ¸ êµ¬ì¡° (Project Structure)

ì´ í”„ë¡œì íŠ¸ëŠ” Next.js App Routerì˜ ì»¨ë²¤ì…˜ì„ ê¸°ë°˜ìœ¼ë¡œ í•˜ë©°, ê¸°ëŠ¥ë³„ ëª¨ë“ˆí™”ë¥¼ ì§€í–¥í•˜ëŠ” êµ¬ì¡°ë¥¼ ê°€ì§‘ë‹ˆë‹¤.

```
.
â”œâ”€â”€ app/                  # ë¼ìš°íŒ…, í˜ì´ì§€, ë ˆì´ì•„ì›ƒ
â”œâ”€â”€ components/           # ì¬ì‚¬ìš© ê°€ëŠ¥í•œ React ì»´í¬ë„ŒíŠ¸
â”œâ”€â”€ lib/                  # ê³µí†µ ë¼ì´ë¸ŒëŸ¬ë¦¬, í—¬í¼, í´ë¼ì´ì–¸íŠ¸ ì„¤ì •
â”œâ”€â”€ public/               # ì •ì  ì—ì…‹ (ì´ë¯¸ì§€, í°íŠ¸ ë“±)
â”œâ”€â”€ scripts/              # í”„ë¡œì íŠ¸ ì„¤ì • ë° ìë™í™” ìŠ¤í¬ë¦½íŠ¸
â””â”€â”€ types/                # ì „ì—­ TypeScript íƒ€ì… ì •ì˜
```

*   **`app/`**: í´ë” êµ¬ì¡°ê°€ URL ê²½ë¡œê°€ ë©ë‹ˆë‹¤. `page.tsx`, `layout.tsx`, `loading.tsx`, `error.tsx` ë“± íŒŒì¼ ì»¨ë²¤ì…˜ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. `api/` í´ë”ëŠ” ë°±ì—”ë“œ API ì—”ë“œí¬ì¸íŠ¸ ì—­í• ì„ í•©ë‹ˆë‹¤.
*   **`components/`**: `ui/`(ì›ìì ), `features/`(ê¸°ëŠ¥ë³„), `layouts/`(êµ¬ì¡°)ë¡œ ë‚˜ëˆ„ì–´ ì»´í¬ë„ŒíŠ¸ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤.
*   **`lib/`**: `supabase/` í´ë¼ì´ì–¸íŠ¸, `gemini/` í´ë¼ì´ì–¸íŠ¸ ë“± ì™¸ë¶€ ì„œë¹„ìŠ¤ ì—°ë™ ì½”ë“œì™€ `utils.ts` ê°™ì€ ê³µí†µ í•¨ìˆ˜ê°€ ìœ„ì¹˜í•©ë‹ˆë‹¤.
*   **`types/`**: `database.ts` ë“± í”„ë¡œì íŠ¸ ì „ë°˜ì—ì„œ ì‚¬ìš©ë˜ëŠ” TypeScript íƒ€ì…ì„ ì •ì˜í•©ë‹ˆë‹¤.

---

## 5. í•µì‹¬ ì•„í‚¤í…ì²˜ ë° ì»¨ì…‰ (Core Architecture & Concepts)

### 5.1. ë Œë”ë§ ì „ëµ: ì„œë²„ ì»´í¬ë„ŒíŠ¸ vs. í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸
*   **ì„œë²„ ì»´í¬ë„ŒíŠ¸ (ê¸°ë³¸)**: ë°ì´í„° í˜ì¹­, ë°±ì—”ë“œ ë¦¬ì†ŒìŠ¤ ì§ì ‘ ì ‘ê·¼ì— ì‚¬ìš©. `async/await` ì§ì ‘ ì‚¬ìš© ê°€ëŠ¥.
*   **í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ (`'use client'`)**: ì‚¬ìš©ì ìƒí˜¸ì‘ìš©, `useState`/`useEffect` ë“± í›… ì‚¬ìš© ì‹œ íŒŒì¼ ìƒë‹¨ì— ì§€ì‹œì–´ ì¶”ê°€.

### 5.2. ë°ì´í„° í˜ì¹­ (Data Fetching)
*   **í´ë¼ì´ì–¸íŠ¸**: `useEffect`ì™€ Supabase í´ë¼ì´ì–¸íŠ¸ë¥¼ ì‚¬ìš©. ì‹¤ì‹œê°„ ë™ê¸°í™”ëŠ” Supabase Realtime êµ¬ë….
*   **ì„œë²„ (ê¶Œì¥)**: `async/await`ë¥¼ ì‚¬ìš©í•˜ì—¬ ì»´í¬ë„ŒíŠ¸ ë Œë”ë§ ê³¼ì •ì—ì„œ ì§ì ‘ ë°ì´í„° ì¡°íšŒ.

### 5.3. API (Route Handlers)
`app/api` ë‚´ `route.ts` íŒŒì¼ì´ ë°±ì—”ë“œ API ì—”ë“œí¬ì¸íŠ¸ ì—­í• ì„ í•©ë‹ˆë‹¤. `NextRequest`ë¥¼ ë°›ì•„ `NextResponse`ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

### 5.4. ìƒíƒœ ê´€ë¦¬ (State Management)
> **[TODO]**
> í˜„ì¬ëŠ” React í›… ì¤‘ì‹¬ìœ¼ë¡œ ìƒíƒœë¥¼ ê´€ë¦¬. ì „ì—­ ìƒíƒœ ê´€ë¦¬ê°€ í•„ìš”í•  ê²½ìš° **Zustand** ë„ì… ê³ ë ¤.

### 5.5. ì¸ì¦ (Authentication)
**Supabase Auth**ì™€ `@supabase/ssr`ì„ ì‚¬ìš©í•œ ì¿ í‚¤ ê¸°ë°˜ ì„¸ì…˜ ê´€ë¦¬ë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤. `middleware.ts`ê°€ ëª¨ë“  ìš”ì²­ì—ì„œ ì„¸ì…˜ì„ ê°±ì‹ í•˜ì—¬ ì„œë²„/í´ë¼ì´ì–¸íŠ¸ ê°„ ì¸ì¦ ìƒíƒœë¥¼ ë™ê¸°í™”í•©ë‹ˆë‹¤.

---

## 6. ê°œë°œ ê°€ì´ë“œ (Development Guide)

### 6.1. Git ë¸Œëœì¹˜ ì „ëµ ë° ì»¤ë°‹ ì»¨ë²¤ì…˜
*   **ë¸Œëœì¹˜**: `main`(ìš´ì˜), `develop`(ê°œë°œ), `feature/ì´ìŠˆë²ˆí˜¸-ê¸°ëŠ¥ëª…`(ê¸°ëŠ¥)
*   **ì»¤ë°‹**: Conventional Commits ê·œì¹™ ì¤€ìˆ˜ (ì˜ˆ: `feat(auth): Add Google login`)

### 6.2. ì½”ë”© ìŠ¤íƒ€ì¼
ESLint, Prettier, husky, lint-stagedë¥¼ í†µí•´ ì»¤ë°‹ ì‹œ ì½”ë“œ ìŠ¤íƒ€ì¼ì„ ìë™ìœ¼ë¡œ ê²€ì‚¬í•˜ê³  êµì •í•©ë‹ˆë‹¤.

### 6.3. API ì‘ë‹µ í˜•ì‹
*   **ì„±ê³µ**: `{ "status": "success", "data": { ... } }`
*   **ì‹¤íŒ¨**: `{ "status": "error", "message": "Error message" }`

---

## 7. í™˜ê²½ ë³€ìˆ˜ (Environment Variables)

`.env.local` íŒŒì¼ì— ì•„ë˜ ë³€ìˆ˜ë“¤ì„ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤. (`scripts/setup-env.js` ì‚¬ìš© ê¶Œì¥)

| ë³€ìˆ˜ëª… | ì„¤ëª… |
| --- | --- |
| `NEXT_PUBLIC_SUPABASE_URL` | Supabase í”„ë¡œì íŠ¸ URL |
| `NEXT_PUBLIC_SUPABASE_ANON_KEY` | Supabase `anon` public í‚¤ |
| `GEMINI_API_KEY` | Google AI Studio API í‚¤ |
| `SUPABASE_SERVICE_ROLE_KEY` | (ì„ íƒ) Supabase ì„œë¹„ìŠ¤ ì—­í•  í‚¤ |

---

## 8. ë°°í¬ (Deployment)

**Vercel**ì„ í†µí•´ Git ë¸Œëœì¹˜ì™€ ì—°ë™í•˜ì—¬ ìë™ ë°°í¬ë©ë‹ˆë‹¤.
*   **Production**: `main` ë¸Œëœì¹˜ì— ë³‘í•© ì‹œ ë°°í¬
*   **Preview**: `develop` ë˜ëŠ” `feature` ë¸Œëœì¹˜ì— í‘¸ì‹œ/PR ì‹œ ë°°í¬