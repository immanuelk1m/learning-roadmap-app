## 학습 페이지 UI/디자인 리뷰

- 대상 화면: `frontend/app/subjects/[id]/study/page.tsx`
- 목적: 좌측 PDF, 우측 지식 트리/스터디 가이드의 2-페인 학습 워크스페이스
- 구성 요소: `PDFViewer`, `StudyTabs`, `KnowledgeTreeView`, `StudyGuide`

---

### 요약 — 핵심 권고사항
- 2-페인 사용성 개선: 리사이즈 가능한 스플리터, 페인 접기, sticky 헤더.
- 문서 선택/평가 상태 가시화: 세션 중 예기치 않은 리디렉션 방지.
- 접근성: 페인/탭 간 키보드 내비, 적절한 롤/라벨.
- 반응형: 모바일에서는 단일 컬럼으로 전환, PDF/사이드 콘텐츠 탭 스위칭.
- 시스템 피드백: 양 페인의 로딩/빈/에러 상태 명확화, 늦게 도착하는 스터디 가이드 안내.

---

### 1) 헤더 & 내비게이션

문제
- 뒤로가기는 있으나 브레드크럼이 없고, 문서 제목은 로드되어야만 보입니다.
- 동일 과목 내 문서 간 빠른 전환 도구가 없습니다.

권장사항
- 브레드크럼: 과목 목록 > 과목명 > 문서 제목(가능한 경우).
- 최근 완료 문서 + 분석 상태를 포함하는 문서 선택 드롭다운을 추가합니다.
- 선택 문서의 페이지 수, 마지막 업데이트를 표시합니다.

---

### 2) 2-페인 레이아웃

문제
- 고정 50/50 분할은 콘텐츠 유형에 따라 비효율적일 수 있고, 리사이즈가 불가합니다.
- 탭 헤더가 콘텐츠와 같은 스크롤 컨텍스트에 있어 스크롤 아웃됩니다.

권장사항
- 드래그 가능한 스플리터로 너비 조절, 사용자별 선호를 기억합니다.
- 한쪽 페인을 접어 반대쪽에 집중할 수 있게 합니다.
- 우측 탭 헤더를 sticky로, 긴 콘텐츠는 섹션 앵커를 제공합니다.

---

### 3) 지식 트리 탭

문제
- 아는/모르는 개념 요약은 유용하지만, 트리에 빠른 필터/검색이 없습니다.

권장사항
- 노드명 검색을 추가합니다.
- 필터: 모르는 개념만, 선수 지식만, 최근 업데이트만 보기.
- 인라인 액션: 복습 처리, 해당 노드의 문제로 점프.

---

### 4) 스터디 가이드 탭

문제
- 가이드가 즉시 존재하지 않을 수 있고, 사용자에게 명확한 상태 안내가 필요합니다.

권장사항
- 생성 중에는 플레이스홀더/스켈레톤을 보여주고, 생성 근거(평가 기반)와 마지막 업데이트 표시.
- 내보내기(복사, PDF 다운로드)와 프린트 스타일을 제공합니다.

---

### 5) 평가 리디렉션 로직

관찰
- O/X 문제가 존재하고 시도 이력이 없으면 페이지가 평가로 리디렉션됩니다.

권장사항
- 즉시 리디렉션 대신, 왜 평가가 필요한지 설명하는 인라인 모달과 진행 CTA를 먼저 보여주고, 닫힘 상태를 기억합니다.
- 평가 완료 후에는 토스트와 함께 자동 복귀 및 문맥 복원.

---

### 6) 접근성

체크리스트
- 페인에 랜드마크/롤, 탭리스트는 적절한 ARIA 롤과 `aria-selected` 사용.
- 키보드 단축키: 예) `[`/`]`로 페인 리사이즈, `1/2`로 탭 전환; 단축키 도움말 모달 제공.
- PDF 뷰어: 텍스트 선택/줌 컨트롤에 라벨, 포커스 가능한 컨트롤 보장.

---

### 7) 반응형

권장사항
- 소형 화면에서는 단일 컬럼으로 전환하고, PDF vs. 사이드 콘텐츠를 탭으로 전환합니다.
- 마지막으로 열어둔 탭을 세션 간 지속합니다.

---

### 8) 시스템 피드백

권장사항
- 지식 노드가 비어 있을 때(`AI가 문서를 분석 중입니다...`) 진행 표시와 문서 페이지로 이동 링크 제공.
- 스터디 가이드가 없으면(평가 완료 시) 생성 제안과 예상 시간 표시.

---

### 9) 성능

권장사항
- 스트리밍/청크 처리 검토, 파생 배열 메모이즈.
- 매 렌더 재패칭을 피하고 안정적인 props/key에 의존합니다.

---

### 10) QA 체크리스트
- 페인 리사이즈가 내비게이션 후에도 유지됩니다.
- 탭 ARIA/키보드 조작 검증됨.
- 로딩/빈/에러 상태가 구분되고 액션 가능.
- 평가 게이팅을 사전에 커뮤니케이션.
